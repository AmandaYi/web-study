<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script>
        // console.log((new Date()).toLocaleTimeString())
        // for (let i = 0; i < 10000000000; i++) {
        // }
        // console.log((new Date()).toLocaleTimeString())
        // setTimeout(() => {
        //     console.log("1")
        // }, 2000)
        // setTimeout(() => {
        //     console.log("2")
        // })
        // console.log("3")
        // console.log("4")




        // ((window) => {
        //     // 1.5.0之前的调用方法
        //     $.ajax({
        //         url: "./data.json",
        //         success: (res) => {
        //             console.log(res)
        //         },
        //         error: (err) => {
        //             console.log(err)
        //         }
        //     })
        //     // 1.5.0之后的调用方法
        //     var count = 0
        //     var ajax = $.ajax("./data.json1")
        //     ajax.done((res) => {
        //         console.log(++count) // 1
        //         console.log(res)
        //     }, (res) => {
        //         console.log(++count) // 2
        //         console.log(res)
        //     }, (res) => {
        //         console.log(++count) // 3
        //         console.log(res)
        //     }, (res) => {
        //         console.log(++count) // 4
        //         console.log(res)
        //     })
        //     .fail(err=>{
        //         console.log(++count) // 1
        //         console.log(err)
        //     },err=>{
        //         console.log(++count) // 2
        //         console.log(err)
        //     })
        //     .then((res)=>{

        //     },(err)=>{

        //     })

        // var wait = function () {
        //     setTimeout(() => {
        //         console.log("执行完成")
        //     }, 2000)
        // }
        // wait() // 两秒以后打印执行完成
        // })(window)


        // ((window) => {
        //     function waitHandle() {
        //         var dtd = $.Deferred()
        //         var wait = function (dtd) {
        //             var task = function () {
        //                 // dtd.resolve("yes") // 表示异步已经完成
        //                 // dtd.reject("no") // 表示异步任务失败,如果都写了,那么前面的一个会阻断后面的

        //                 parseInt(Math.random()) * 10 < 5 ? dtd.resolve("随机数大于5") : dtd.reject("随机数小于5")
        //             }
        //             setTimeout(task, 2000)
        //             return dtd; // 要求返回 deferred对象
        //         }
        //         // 这里一定要有返回值
        //         return wait(dtd)
        //     }
        //     var result = waitHandle()
        //     result.then((res) => {
        //         console.log(res)
        //     }, (err) => {
        //         console.log(err)
        //     })
        //     result.then((res) => {
        //         console.log(res)
        //     }, (err) => {
        //         console.log(err)
        //     })

        //     result.done(res => {
        //         console.log(res)
        //     })
        //     result.done(res => {
        //         console.log(res)
        //     })
        //     result.fail(err => {
        //         console.log(res)
        //     })
        //     // 这里如果链式调用的话, then后面不能跟任何了,除非在then的第一个函数里面返回自身
        //     var result2 = waitHandle()
        //     result2
        //         .then((res) => {
        //             console.log(res)

        //         }, (err) => {
        //             console.log(err)
        //         })
        //     result2
        //         .then((res) => {
        //             console.log(res)
        //         }, (err) => {
        //             console.log(err)
        //         })
        //     // 这里是改变了上的状态,同时也可以把reject改为resolve
        //     result2.reject("把正确的状态修改为错误的")
        //     result2
        //         .then((res) => {
        //             console.log(res)
        //         }, (err) => {
        //             console.log(err)
        //         })
        // })(window)

        // ((window) => {
        //     function waitHandle() {
        //         var dtd = $.Deferred()
        //         var wait = function (dtd) {
        //             dtd.resolve("成功了")
        //             return dtd.promise()
        //         }
        //         return wait(dtd)
        //     }
        //     var result = $.when(waitHandle())

        //     result.done(res => console.log(res))

        // })(window)
     
    </script>
</body>

</html>